import{s}from"./alert-Cg1FgE4f.js";$(document).ready(function(){let _;function b(){_=setInterval(()=>{const o=new Date,a=String(o.getHours()).padStart(2,"0"),e=String(o.getMinutes()).padStart(2,"0"),t=String(o.getSeconds()).padStart(2,"0");$("#time-in-real-time").val(`${a}:${e}:${t}`)},1e3)}b(),$(document).on("change","#dte-otra-fecha",function(){this.checked?Swal.fire({title:"¿Desea cambiar la fecha y hora del DTE?",text:"Tome en cuenta que enviar una fecha distinta a la actual puede ser observado por el Ministerio de Hacienda, ¿Desea continuar?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, Cambiar",cancelButtonText:"No"}).then(o=>{o.isConfirmed?clearInterval(_):$("#dte-otra-fecha").prop("checked",!1)}):b()});const C=$("#count_product"),g=$("#price");$("#count_product, #price").on("input",function(){const o=parseFloat(C.val()),a=parseFloat(g.val());if(C.val()===""||g.val()===""){$("#iva").text("$0.00"),$("#turismo").text("$0.00"),$("#add-valorem-bebidas-alcoholicas").text("$0.00"),$("#add-valorem-tabaco-cigarrillos").text("$0.00"),$("#add-valorem-tabaco-cigarros").text("$0.00"),$("#total_product").val(0);return}var e=o*a;const t=parseFloat($("#descuento_product").val())||0;if(e=e-t,e<0){$("#descuento_product").val(0),$("#total_product").val(d(parseFloat(o*a),8)),s("error","Error","El descuento no puede ser mayor al total");return}$("#total_product").val(d(e,8)),$("#descuento_product").prop("max",d(e,8)),y(a,o)}),$("#descuento_product").on("input",function(){const o=parseFloat($(this).val())||0,a=parseFloat($(this).prop("max"))||0;if(a===0){s("error","Error","Debes ingresar un precio y cantidad"),$(this).val("");return}if(o>a){s("error","Error","El descuento no puede ser mayor al total"),$(this).val("");return}const e=a-o;$("#total_product").val(d(e,8))}),$("#tipo_venta").on("Changed",function(){const o=$("#tipo_venta").val();new URL(window.location.href).searchParams.get("document_type")==="01"&&(o!=="Gravada"?$("label[for='price']").text("Precio (sin IVA)"):$("label[for='price']").text("Precio (con IVA)"))});function x(){const o=$("#form-add-product"),a=parseFloat(o.data("base-price-without-iva"))||0,e=parseFloat(o.data("base-price-with-iva"))||0,t=$("#price_variant_id");if(t.length>0&&t.is(":visible")){const n=t.find("option:selected"),r=parseFloat(n.data("priceWithoutIva")),i=parseFloat(n.data("priceWithIva"));return{without:isNaN(r)?a:r,with:isNaN(i)?e:i}}return{without:a,with:e}}function v(){const o=$("#form-add-product"),a=parseFloat(o.data("base-price-with-iva")),e=parseFloat(o.data("base-price-without-iva"));if(isNaN(a)&&isNaN(e))return;const t=o.data("dte-type"),n=$("#type-sale").val(),r=x();let i=t!=="01"?r.without:r.with;t==="01"&&n&&n!=="Gravada"&&(i=r.with/1.13),r.with,$("#product_price").val(d(i,8)),$("#count").trigger("input")}$("#type-sale").on("Changed",function(){$("#type-sale").val(),new URL(window.location.href).searchParams.get("document_type")==="01"&&v()}),$("#count_product, #valor_unitario, #depreciacion").on("input",function(){const o=parseFloat($("#count_product").val())||0,a=parseFloat($("#valor_unitario").val())||0,e=parseFloat($("#depreciacion").val())||0,t=o*a-e;$("#valor_donado").val(d(t,8))});function y(o,a){const e=a*(o/1.13)*.13,t=a*(o/1.13)*.05,n=a*(o/1.13)*.08,r=a*(o/1.13)*.39,i=a*(o/1.13)*1;$("#iva").text("$"+d(e,2)),$("#turismo").text("$"+d(t,2)),$("#add-valorem-bebidas-alcoholicas").text("$"+d(n,2)),$("#add-valorem-tabaco-cigarrillos").text("$"+d(r,2)),$("#add-valorem-tabaco-cigarros").text("$"+d(i,2))}$(".tax-toggle").on("change",function(){const o=$($(this).data("list"));$(this).is(":checked")?o.removeClass("hidden"):o.addClass("hidden")}),$(document).on("click",".selected-customer",function(){const o=$(this).data("url");$("#selected-customer").addClass("hidden").removeClass("flex"),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden"),axios.get(o).then(a=>{const e=a.data;if($("#numero_documento_customer").val(e.customer.numDocumento??""),$("#nit-receptor").val(e.customer.numDocumento??"").trigger("input"),Livewire.dispatch("refreshNumeroDocumento",{nuevoNumeroDocumento:e.customer.numDocumento??""}),$("#nombre_customer").val(e.customer.nombre),$("#nombre_comercial_customer").val(e.customer.nombreComercial),$("#actividad_economica_customer").val(e.customer.actividadEconomica),$("#complemento_customer").val(e.customer.complemento),$("#correo_customer").val(e.customer.correo),$("#telefono_customer").val(e.customer.telefono),$("#nrc_customer").val(e.customer.nrc),$("#select-tipos-documentos").html(e.select_tipos_documentos),$("#select-actividad-economica").html(e.select_actividad_economica),$("#select-departamentos").html(e.select_departamentos),$("#select-municipio").html(e.select_municipios),$("#select-pais").html(e.select_countries),$("#select-tipo-persona").html(e.select_tipo_persona),e.has_branches&&e.branches&&e.branches.length>0){const t=$("#customer_branch_select");t.empty(),t.append('<option value="">Seleccione una sucursal</option>'),e.branches.forEach(n=>{t.append(`<option value="${n.id}" 
                                data-codigo="${n.branch_code}" 
                                data-nombre="${n.nombre}"
                                data-departamento="${n.departamento}"
                                data-municipio="${n.municipio}"
                                data-complemento="${n.complemento||""}">
                                ${n.branch_code} - ${n.nombre}
                            </option>`)}),$("#customer-branches-section").removeClass("hidden")}else $("#customer-branches-section").addClass("hidden"),$("#customer_branch_select").empty().append('<option value="">Seleccione una sucursal</option>')}).catch(a=>{console.error("Error al obtener el cliente:",a)}).finally(()=>{$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")})}),$(document).on("click",".btn-selected-product",function(){const o=$(this).closest("form"),a=o.attr("action"),e=o.attr("method"),t=o.serialize();$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden"),$("#form-add-product").trigger("reset"),axios({method:e,url:a,data:t}).then(n=>{const r=n.data;if(r.success===!1){s("error","Error","Producto no encontrado");return}if($("#product_id").val(r.product.id),$("#product_description").val(r.product.descripcion),r.product.has_stock&&r.dte!=="14"){const f=r.product.stockDisponible??0;$("#count").prop("max",f),f<=0&&!r.product.is_global&&s("warning","Advertencia","Este producto no tiene stock disponible en la sucursal seleccionada")}else $("#count").removeAttr("max");let i=r.product.precioSinTributos,c=r.product.precioUni;!r.price_variants_enabled&&r.customer&&r.customer.special_price&&(i=r.product.special_price,c=r.product.special_price_with_iva);const l=$("#form-add-product");l.data("base-price-with-iva",c),l.data("base-price-without-iva",i),l.data("dte-type",r.dte);const m=$("#price-variant-container"),p=$("#price_variant_id");r.price_variants_enabled&&Array.isArray(r.price_variants)&&r.price_variants.length>0?(p.empty(),p.append(new Option("Precio base","")),r.price_variants.forEach(f=>{const h=new Option(f.name,f.id);$(h).attr("data-price-with-iva",f.effective_price_with_iva),$(h).attr("data-price-without-iva",f.effective_price_without_iva),p.append(h)}),r.customer_price_variant_id?(p.val(String(r.customer_price_variant_id)),p.prop("disabled",!0),$("#price-variant-help").text("Variante asignada al cliente.")):(p.prop("disabled",!1),$("#price-variant-help").text("Si no se selecciona variante, se utilizará el precio base.")),m.removeClass("hidden")):(p.prop("disabled",!1),p.empty().append(new Option("Precio base","")),m.addClass("hidden")),v(),$("#container-data-product").removeClass("hidden")}).catch(n=>{console.error("Error al obtener el producto:",n)}).finally(()=>{$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")})}),$(document).on("change","#price_variant_id",function(){v()}),$("#count").on("input",function(){const o=$(this).val(),a=$("#product_price").val(),e=parseFloat($(this).prop("max")),t=parseFloat($("#descuento_total").val())||0,n=d(parseFloat(o)*parseFloat(a)-t,8);if(e&&!isNaN(e)&&o>e){s("error","Error","La cantidad no puede ser mayor al stock disponible"),$(this).val(""),$("#total_item").val("");return}if(n<0){$("#descuento_total").val(0),$("#total_item").val(parseFloat(o)*d(parseFloat(a),8)),s("error","Error","El descuento no puede ser mayor al total");return}$("#total_item").val(n),$("#descuento_total").prop("max",n)}),$("#descuento_total").on("input",function(){const o=parseFloat($(this).val())||0,a=parseFloat($("#descuento_total").prop("max"))||0;if(a===0){s("error","Error","Debes ingresar una cantidad y precio"),$(this).val("");return}if((o===""||o===0)&&$("#total_item").val($("#product_price").val()*$("#count").val()),o>a){s("error","Error","El descuento no puede ser mayor al total"),$(this).val(""),$("#total_item").val(d(a,8));return}const e=a-o;if(e<0){$("#total_item").val(0),s("error","Error","El descuento no puede ser mayor al total");return}$("#total_item").val(d(e,8))}),$("#btn-add-product").click(function(){const o=$(this).closest("form");let a=!1;const e=$("#count"),t=$("#error-"+e.attr("id")),n=$("#type-sale"),r=$("#error-"+n.attr("id")),i=$("#total_item"),c=$("#error-"+i.attr("id"));if(e.val().trim()===""?(e.focus().addClass("is-invalid"),t.css("display","flex"),a=!0):(e.removeClass("is-invalid"),t.css("display","none")),n.length>0&&(n.val().trim()===""?(n.next().find(".selected").addClass("is-invalid"),r.css("display","flex"),a=!0):(n.next().find(".selected").removeClass("is-invalid"),r.css("display","none"))),i.val().trim()===""?(i.focus().addClass("is-invalid"),c.css("display","flex"),a=!0):(i.removeClass("is-invalid"),c.css("display","none")),a){s("error","Error","Rellena los campos requeridos");return}$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden"),axios({method:o.attr("method"),url:o.attr("action"),data:o.serialize()}).then(l=>{const m=l.data;console.log(m),m.success?($("#table-products-dte").html(m.table_products),$("#table-exportacion").html(m.table_exportacion),m.table_sujeto_excluido!==void 0&&$("#table-sujeto-excluido").html(m.table_sujeto_excluido),$("#container-data-product").addClass("hidden"),o.trigger("reset"),s("success","Agregado","Producto agregado correctamente"),m.monto_pendiente!==void 0&&$("#monto_total").val(d(m.monto_pendiente,2))):s("error","Error",m.message)}).catch(l=>{console.error("Error al agregar producto:",l)}).finally(()=>{$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")})}),$(document).on("change",".retener",function(){const o=$(this).data("action");var a="inactive";const e=$(this).data("type");$(this).is(":checked")?a="active":a="inactive",axios.get(o,{params:{value:a,type:e}}).then(function(t){$("#table-products-dte").html(t.data.table_products),t.data.table_sujeto_excluido!==void 0&&$("#table-sujeto-excluido").html(t.data.table_sujeto_excluido),t.data.monto_pendiente!==void 0&&$("#monto_total").val(d(t.data.monto_pendiente,2))}).catch(function(t){console.log(t)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$("#documento_asociado").on("Changed",function(){const o=$(this).val(),a=$("#container-data-documento-asociado"),e=$("#container-data-transporte"),t=$("#container-data-medico");switch(o){case"1":case"2":a.removeClass("hidden"),a.find("input").attr("required",!0),e.addClass("hidden"),e.find("input").removeAttr("required"),t.addClass("hidden"),t.find("input").removeAttr("required");break;case"3":a.addClass("hidden"),a.find("input").removeAttr("required"),t.removeClass("hidden"),t.find("input").attr("required",!0),e.addClass("hidden"),e.find("input").removeAttr("required");break;case"4":a.addClass("hidden"),a.find("input").removeAttr("required"),e.removeClass("hidden"),e.find("input").attr("required",!0),t.addClass("hidden"),t.find("input").removeAttr("required");break}}),$("#condicion_operacion").on("Changed",function(){const o=$(this).val();console.log(o),o==="1"&&($("#input-plazo").addClass("hidden"),$("#input-periodo").addClass("hidden")),o==="2"&&($("#input-plazo").removeClass("hidden"),$("#input-periodo").removeClass("hidden")),o==="3"&&($("#input-plazo").removeClass("hidden"),$("#input-periodo").removeClass("hidden"))}),$("#tipo_item_exportar").on("Changed",function(){const o=$(this).val(),a=$("#container-data-exportacion");o==="1"||o==="3"?a.removeClass("hidden"):(a.addClass("hidden"),a.find("input").val(""))});function u(o,a){return a=a||o.val(),a===""?(o.addClass("is-invalid"),!1):(o.removeClass("is-invalid"),!0)}$("#btn-add-forma-pago").on("click",function(){const o=$(this).data("action"),a=$("#condicion_operacion").val(),e=$("#forma_pago"),t=$("#monto_total"),n=$("#numero_documento"),r=$("#plazo"),i=$("#periodo");var c=!0;if(a==="1"&&(u(e.next().find(".selected"),e.val())||(c=!1),u(t)||(c=!1),u(n)||(c=!1)),a==="2"&&(u(t)||(c=!1),u(n)||(c=!1),u(r.next().find(".selected"),r.val())||(c=!1),u(i)||(c=!1)),a==="3"&&(u(e.next().find(".selected"),e.val())||(c=!1),u(t)||(c=!1),u(n)||(c=!1),u(r.next().find(".selected"),r.val())||(c=!1),u(i)||(c=!1)),!c){s("error","Error","Rellena los campos requeridos");return}c&&(axios.post(o,{forma_pago:e.val(),monto:t.val(),numero_documento:n.val(),plazo:r.val(),periodo:i.val(),_token:$("input[name='_token']").val()}).then(function(l){l.data.success?($("#table-formas-pago").html(l.data.table_data),$("#monto_total").val(l.data.monto_pendiente),s("success","Exito","Forma de pago agregada correctamente")):s("error","Error",l.data.message)}).catch(function(l){console.log(l)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden"))}),$("#monto_sujeto_retencion").on("input",function(){const o=$(this).val();$("#codigo_tributo").val()==="22"&&$("#iva_retenido").val(d(o*.01,2))}),$("#codigo_tributo").on("Changed",function(){if($(this).val()==="Retención IVA"){var a=$("#monto_sujeto_retencion").val();$("#iva_retenido").val(d(a*.01,2))}}),$(".new-item").on("click",function(){const o=$(this).data("action"),a=$(this).data("type");axios.get(o).then(function(e){if(e.data.success)a==="new-product"?($("#drawer-new-product").removeClass("-translate-x-full"),$("#overlay").removeClass("hidden"),$("body").addClass("overflow-hidden")):a==="selected-product"?($("#selected-product").removeClass("hidden").addClass("flex"),$("body").addClass("overflow-hidden")):a==="other-contribution"&&($("#taxes-iva").removeClass("hidden").addClass("flex"),$("body").addClass("overflow-hidden"));else{s("warning","Advertencia","Para agregar items, primero debe ingresar los documentos relacionados");return}}).catch(function(e){console.log(e)})}),$(document).on("click",".submit-form",function(){const o=$(this).closest("form");let a=!0;if(o.find("[required]").each(function(){const e=$(this),t=$("#error-"+e.attr("id"));e.val().trim()?(e.removeClass("is-invalid"),t.css("display","none"),a=!0):(e.addClass("is-invalid"),t.css("display","flex"),a=!1),e.is("[select]")&&!e.val().trim()&&e.next().find(".selected").addClass("is-invalid")}),!a){s("error","Error","Rellena los campos requeridos");return}axios({method:o.attr("method"),url:o.attr("action"),data:o.serialize()}).then(function(e){const t=e.data;t.success?(s("success","Exito",t.message),o.trigger("reset"),$("#table-"+t.table).html(t.table_data),t.modal!==void 0?$("#"+t.modal).addClass("hidden").removeClass("flex"):t.drawer!==void 0&&($("#"+t.drawer).addClass("-translate-x-full"),$("#overlay").addClass("hidden")),t.monto_pendiente!==void 0&&$("#monto_total").val(d(t.monto_pendiente,2)),t.table_selected_product!==void 0&&$("#table-selected-product").html(t.table_selected_product),t.table_exportacion!==void 0&&$("#table-exportacion").html(t.table_exportacion),t.table_sujeto_excluido!==void 0&&$("#table-sujeto-excluido").html(t.table_sujeto_excluido),t.select_data&&$("."+t.select).html(t.select_data),t.select_data_new&&$("."+t.select_new).html(t.select_data_new),t.total_iva_retenido_texto!==void 0&&$("#iva-retenido-letters").text(t.total_iva_retenido_texto),t.total_discounts!==void 0&&$("#container-total-discount").html(t.total_discounts),t.comprobante_retencion!==void 0&&(t.success?($("#container-data-hacienda").removeClass("hidden"),$("#cod-generacion-hacienda").val(t.data.codGeneracion),$("#tipo-dte-hacienda").val(t.data.tipoDte),$("#fecha-emision-hacienda").val(t.data.fechaEmision),$("#monto-documento-hacienda").val(t.data.sujetoRetencion),$("#iva-retenido-documento-hacienda").val(t.data.ivaRetenido),$("#descripcion-retencion-hacienda").val(t.data.descripcion)):s("error","Error",t.message))):s("error","Error",t.message)}).catch(function(e){console.log(e)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$(document).on("click",".delete-discounts",function(){const o=$(this).data("action");axios.get(o).then(function(a){const e=a.data;e.success?($("#table-"+e.table).html(e.table_data),e.monto_pendiente!==void 0&&$("#monto_total").val(d(e.monto_pendiente,2)),e.total_discounts!==void 0&&$("#container-total-discount").html(e.total_discounts),e.table_sujeto_excluido!==void 0&&$("#table-sujeto-excluido").html(e.table_sujeto_excluido)):s("error","Error",e.message)}).catch(function(a){console.log(a)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$(document).on("click",".btn-delete",function(){const o=$(this).data("action");axios.get(o).then(function(a){const e=a.data;e.success?(s("success","Exito",e.message),e.table_data&&$("#table-"+e.table).html(e.table_data),e.table_data_2&&$("#table-"+e.table_2).html(e.table_data_2),e.total_iva_retenido_texto!==void 0&&$("#iva-retenido-letters").text(e.total_iva_retenido_texto),e.table_exportacion!==void 0&&$("#table-exportacion").html(e.table_exportacion),e.table_sujeto_excluido!==void 0&&$("#table-sujeto-excluido").html(e.table_sujeto_excluido),e.select_data&&$("."+e.select).html(e.select_data),e.select_data_new&&$("."+e.select_new).html(e.select_data_new),e.monto_pendiente!==void 0&&$("#monto_total").val(d(e.monto_pendiente,2))):s("error","Error",e.message)}).catch(function(a){console.log(a)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$("#omitir_datos_receptor, #save_as_template").on("change",function(){$("#save_as_template").is(":checked")?($("#omitir-datos-receptor-container").addClass("hidden"),$("#generate-button").addClass("hidden"),$("#draft-button").addClass("hidden"),$("#template-button").removeClass("hidden"),$("#template_name").removeClass("hidden")):($("#omitir-datos-receptor-container").removeClass("hidden"),$("#generate-button").removeClass("hidden"),$("#draft-button").removeClass("hidden"),$("#template-button").addClass("hidden"),$("#template_name").addClass("hidden")),$(this).is(":checked")?($("#datos-receptor input, #datos-receptor select, #datos-receptor textarea").val(""),$("#datos-receptor input, #datos-receptor select, #datos-receptor textarea").prop("readonly",!0),$("#datos-receptor select, #datos-receptor input").prop("required",!1),$("#datos-receptor").addClass("hidden")):($("#datos-receptor input, #datos-receptor select").prop("required",!0),$("#datos-receptor input, #datos-receptor select, #datos-receptor textarea").prop("readonly",!1),$("#datos-receptor").removeClass("hidden"))}),$("#container-total-discount input").on("input",function(){$("#container-total-discount input").each(function(){parseFloat($(this).val())>100&&($(this).val(100),s("error","Error","El descuento no puede ser mayor al 100%"))})}),$(document).on("change","#seguro, #flete",function(){const o=$(this).data("url"),a=$(this).data("type"),e=$(this).val();axios.get(o,{params:{value:e,type:a}}).then(t=>{const n=t.data;n.success?(s("success","Éxito",n.message),n.monto_pendiente!==void 0&&$("#monto_total").val(d(n.monto_pendiente,2)),$("#table-exportacion").html(n.table_exportacion)):($("#flete").val(""),$("#seguro").val(""),s("error","Error",n.message))}).catch(t=>{console.error(t)})}),$(document).on("click",".btn-selected-document-electric",function(){const o=$(this).data("url"),a=$(this).data("cod");axios.get(o,{params:{codGeneracion:a}}).then(e=>{const t=e.data;t.success?(console.log("Documento seleccionado:",t),$("#table-"+t.table).html(t.table_data),$("#"+t.modal).addClass("hidden").removeClass("flex"),$("."+t.select).html(t.select_data),$("."+t.select_new).html(t.select_data_new),$("#overlay").addClass("hidden"),$("body").removeClass("overflow-hidden"),s("success","Exito",t.message)):s("error","Error",t.message)}).catch(e=>{console.error(e)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$(document).on("click",".btn-add-document-electric",function(){if($("#numero_documento_customer").val()===""){s("error","Error","Debes seleccionar un cliente antes de agregar un documento electrónico");return}$("#add-documento-electronico").removeClass("hidden").addClass("flex"),$("body").addClass("overflow-hidden")}),$(document).on("click",".btn-selected-document",function(){const o=$(this).data("cod"),a=$(this).data("url");axios.get(a,{params:{codGeneracion:o}}).then(e=>{const t=e.data;t.success?($("#container-data-document").removeClass("hidden"),$("#monto-documento").val(t.monto),$("#cod-generacion").val(o),$("#codigo-tributo-2").val()==="22"&&$("#iva-retenido-documento").val(d(t.monto*.01,2))):s("error","Error",t.message)}).catch(e=>{console.error(e)}).finally(function(){$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")}),$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden")}),$(document).on("submit","#form-query-dte",function(o){o.preventDefault();const a=$(this),e=a.attr("action"),t=a.attr("method"),n=a.serialize();$("#loader").removeClass("hidden"),$("body").addClass("overflow-hidden"),axios({method:t,url:e,data:n}).then(r=>{const i=r.data;i.success?($("#container-data-hacienda").removeClass("hidden"),$("#cod-generacion-hacienda").val(i.codGeneracion),$("#monto-documento-hacienda").val(i.sujetoRetencion),$("#iva-retenido-documento-hacienda").val(i.ivaRetenido),$("#descripcion-retencion-hacienda").val(i.descripcion),s("success","Éxito","Consulta realizada correctamente")):s("error","Error",i.message)}).catch(r=>{console.error("Error al realizar la consulta:",r)}).finally(()=>{$("#loader").addClass("hidden"),$("body").removeClass("overflow-hidden")})}),$("#sucursal_select").on("Changed",function(){const o=$(this).data("action"),a=$(this).val(),e=$(this).data("business-id");$("#datos-sucursal").addClass("hidden"),$.ajax({url:o,type:"GET",data:{sucursal_id:a,business_id:e},success:function(t){$("#punto_venta_select").html(t.html),$("#datos-sucursal #complemento_emisor").val(t.sucursal.complemento),$("#datos-sucursal #correo_emisor").val(t.sucursal.correo),$("#datos-sucursal #telefono_emisor").val(t.sucursal.telefono),$("#datos-sucursal").removeClass("hidden")},error:function(){console.error("Error al cambiar la sucursal")}})});function d(o,a=2){const e=Math.pow(10,a);return Math.round((o+Number.EPSILON)*e)/e}});
