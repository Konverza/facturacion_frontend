import{A as r}from"./autocomplete-i5sh6eXG.js";import{L as c}from"./maska-X9fHs--r.js";import"./autocomplete-BhlH6aML.js";$(function(){const s=$("#numDocumento");let i=null;const l=$("#nrc");new c(l,{mask:"######-#"}),$.ajax({url:"/catalogo/cat_019",success:function(t){const e=document.getElementById("codActividad");new r(e,{data:t,maximumItems:5,threshold:1})}}),$.ajax({url:"/catalogo/cat_020",success:function(t){const e=document.getElementById("codPais");new r(e,{data:t,maximumItems:5,threshold:1})}}),$.ajax({url:"/departamentos/all",success:function(t){const e=$("#departamento");e.empty(),t.forEach(o=>{e.append(new Option(o.valores,o.codigo))}),e.on("change",function(){const o=$(this).val(),a=$("#municipio");a.empty(),o&&t.find(n=>n.codigo===o).municipios.forEach(n=>{a.append(new Option(n.valores,n.codigo))})}),e.trigger("change")}}),$("#customerTable tfoot th").each(function(){if($(this).index()<$("#customerTable tfoot th").length-1){var t=$(this).text();$(this).html('<input class="form-control form-control-sm" type="text" placeholder="Buscar '+t+'" />')}else $(this).html("")}),$("#customerTable").DataTable({initComplete:function(){this.api().columns().every(function(){var t=this;$("input",this.footer()).on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})})},language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"}},dom:'<"container-fluid"<"row"<"col"l><"col"B><"col"f>>>rtip',buttons:[{extend:"print",text:"Imprimir esta tabla",title:"Reporte de Clientes"}],order:[[0,"desc"]]}),$("#tipoDocumento").on("change",function(){let t=$(this).val();t=="36"?i=new c(s,{mask:"####-######-###-#"}):t=="13"?i=new c(s,{mask:"########-#"}):(i.destroy(),i=null)}),$("#clienteExportacion").on("change",function(){$(this).is(":checked")?($("#codPais").prop("disabled",!1),$("#tipoPersona").prop("disabled",!1)):($("#codPais").prop("disabled",!0),$("#tipoPersona").prop("disabled",!0))}),$("#clienteExportacion").trigger("change"),$("#formCliente").on("submit",function(t){t.preventDefault();let e=$(this).serializeArray();(e.tipoDocumento=="36"||e.tipoDocumento=="13")&&(e.numDocumento=e.numDocumento.replace(/-/g,"")),$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:e,success:function(o){o.success?Swal.fire({icon:"success",title:"Cliente guardado",text:o.message,confirmButtonText:"Aceptar"}).then(a=>{window.location.reload()}):Swal.fire({icon:"error",title:"Error al guardar",text:o.message,confirmButtonText:"Aceptar"})}})})});
